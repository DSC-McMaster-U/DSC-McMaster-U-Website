{"version":3,"file":"FormFieldBlock.esm.js","sources":["../../../../../src/components/form/components/FormFieldBlock.tsx"],"sourcesContent":["/** @jsx jsx */\nimport { jsx } from \"@emotion/core\"\nimport React from \"react\"\nimport { FormFieldBlockLayout } from \"./FormField\"\nimport {\n  AriaFormFieldData,\n  useAriaFormField,\n  AriaFormGroupFieldData,\n  useAriaFormGroupField,\n  ErrorValidationMode,\n} from \"../../form-skeletons\"\nimport {\n  FormError,\n  FormHint,\n  StyledLabel,\n  FormLegend,\n  StyledLabelSize,\n  FormFieldsetProps,\n  FormFieldset,\n} from \"./styled-primitives/StyledFormElements\"\nimport { getFieldLayoutStyles } from \"../styles\"\nimport { ThemeCss } from \"../../../theme\"\n\nexport type CommonFieldBlockProps = {\n  id: string\n  label: React.ReactNode\n  labelSize?: StyledLabelSize\n  error?: React.ReactNode\n  hint?: React.ReactNode\n  validationMode?: ErrorValidationMode\n  layout?: FormFieldBlockLayout\n  required?: boolean\n}\n\nexport type RenderFieldControl = (\n  controlProps: AriaFormFieldData[\"controlProps\"]\n) => React.ReactNode\n\nexport type FormFieldBlockProps = CommonFieldBlockProps & {\n  className?: string\n  children: React.ReactNode | RenderFieldControl\n}\n\nexport type WithFormFieldBlock<T> = Omit<T, keyof CommonFieldBlockProps> &\n  CommonFieldBlockProps\n\nexport function FormFieldBlock({\n  id,\n  label,\n  error,\n  hint,\n  required,\n  labelSize,\n  validationMode,\n  layout,\n  className,\n  children,\n}: FormFieldBlockProps) {\n  const fieldData = useAriaFormField(id, {\n    required: required,\n    hasError: !!error,\n    hasHint: !!hint,\n    validationMode,\n  })\n\n  return (\n    <FormFieldBlockBoilerplate\n      fieldData={fieldData}\n      label={label}\n      error={error}\n      hint={hint}\n      layout={layout}\n      labelSize={labelSize}\n      className={className}\n    >\n      {typeof children === `function`\n        ? children(fieldData.controlProps)\n        : children}\n    </FormFieldBlockBoilerplate>\n  )\n}\nexport function FormFieldBlockBoilerplate({\n  fieldData,\n  children,\n  label,\n  error,\n  hint,\n  layout,\n  labelSize,\n  ...rest\n}: Omit<React.ComponentPropsWithoutRef<\"div\">, \"label\"> & {\n  fieldData: AriaFormFieldData\n  label?: React.ReactNode\n  labelSize?: StyledLabelSize\n  error?: React.ReactNode\n  hint?: React.ReactNode\n  layout?: FormFieldBlockLayout\n}) {\n  const { labelCss, fieldBodyCss } = getFieldLayoutStyles(layout)\n\n  const finalLabelCss: ThemeCss = theme => [\n    labelCss(theme),\n    { display: `block` },\n  ]\n\n  return (\n    <div {...rest}>\n      <StyledLabel\n        required={fieldData.controlProps.required}\n        labelSize={labelSize}\n        {...fieldData.labelProps}\n        css={finalLabelCss}\n      >\n        {label}\n      </StyledLabel>\n      <div css={fieldBodyCss}>\n        {children}\n        <FormHint {...fieldData.hintProps}>{hint}</FormHint>\n        <FormError {...fieldData.errorProps}>{error}</FormError>\n      </div>\n    </div>\n  )\n}\n\n/**\n * Group field organism\n *\n */\n\nexport type RenderGroupFieldControl = (\n  controlProps: Pick<\n    AriaFormGroupFieldData,\n    \"getOptionControlProps\" | \"getOptionLabelProps\"\n  >\n) => React.ReactNode\n\nexport type FormGroupFieldBlockProps = CommonFieldBlockProps & {\n  className?: string\n  children: RenderGroupFieldControl\n}\n\nexport function FormGroupFieldBlock({\n  id,\n  label,\n  error,\n  hint,\n  required,\n  labelSize,\n  validationMode,\n  layout,\n  className,\n  children,\n}: FormGroupFieldBlockProps) {\n  const fieldData = useAriaFormGroupField(id, {\n    required: required,\n    error,\n    hint,\n    validationMode,\n  })\n\n  return (\n    <FormGroupFieldBlockBoilerplate\n      fieldData={fieldData}\n      label={label}\n      error={error}\n      hint={hint}\n      layout={layout}\n      labelSize={labelSize}\n      className={className}\n    >\n      {children({\n        getOptionControlProps: fieldData.getOptionControlProps,\n        getOptionLabelProps: fieldData.getOptionLabelProps,\n      })}\n    </FormGroupFieldBlockBoilerplate>\n  )\n}\n\nexport function FormGroupFieldBlockBoilerplate({\n  fieldData,\n  children,\n  label,\n  error,\n  hint,\n  layout,\n  labelSize,\n  ...rest\n}: Omit<FormFieldsetProps, \"label\"> & {\n  fieldData: AriaFormGroupFieldData\n  label?: React.ReactNode\n  labelSize?: StyledLabelSize\n  error?: React.ReactNode\n  hint?: React.ReactNode\n  layout?: FormFieldBlockLayout\n}) {\n  const { labelCss, fieldBodyCss } = getFieldLayoutStyles(layout, true)\n  const finalLabelCss: ThemeCss = theme => [\n    labelCss(theme),\n    { display: `block` },\n  ]\n\n  return (\n    <FormFieldset {...rest}>\n      <FormLegend\n        labelSize={labelSize}\n        required={fieldData.meta.required}\n        {...fieldData.getLegendProps(label)}\n        css={finalLabelCss}\n      />\n      <div css={fieldBodyCss}>\n        {children}\n        <FormHint {...fieldData.hintProps}>{hint}</FormHint>\n        <FormError {...fieldData.errorProps}>{error}</FormError>\n      </div>\n    </FormFieldset>\n  )\n}\n"],"names":["FormFieldBlock","id","label","error","hint","required","labelSize","validationMode","layout","className","children","fieldData","useAriaFormField","hasError","hasHint","controlProps","FormFieldBlockBoilerplate","rest","getFieldLayoutStyles","labelCss","fieldBodyCss","finalLabelCss","theme","display","labelProps","hintProps","errorProps","FormGroupFieldBlock","useAriaFormGroupField","getOptionControlProps","getOptionLabelProps","FormGroupFieldBlockBoilerplate","meta","getLegendProps"],"mappings":"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"}
{"version":3,"file":"SplitButton.esm.js","sources":["../../../../src/components/SplitButton/SplitButton.tsx"],"sourcesContent":["/** @jsx jsx */\nimport { jsx } from \"@emotion/core\"\nimport React from \"react\"\nimport { ThemeCss } from \"../../theme\"\nimport { ButtonVariant } from \"../../theme/styles/button\"\nimport {\n  DropdownMenu,\n  DropdownMenuButton,\n  DropdownMenuItemsLowLevel,\n  DropdownMenuPopover,\n} from \"../DropdownMenu\"\nimport { Position, positionRight } from \"@reach/popover\"\nimport { useIconButton } from \"../IconButton\"\nimport { MdKeyboardArrowDown } from \"react-icons/md\"\nimport { Button, ButtonProps } from \"../Button\"\n\nconst baseCss: ThemeCss = _theme => ({\n  display: `inline-flex`,\n  alignItems: `center`,\n})\n\nconst primaryButtonCss: ThemeCss = _theme => ({\n  borderTopRightRadius: 0,\n  borderBottomRightRadius: 0,\n  borderRightColor: `transparent`,\n})\n\nconst separatorCss: ThemeCss = _theme => ({\n  display: `inline-block`,\n  width: 1,\n  alignSelf: `stretch`,\n})\n\nexport type SplitButtonVariant = Exclude<ButtonVariant, \"GHOST\">\n\nexport type SplitButtonProps = Omit<\n  ButtonProps,\n  | \"variant\"\n  | \"leftIcon\"\n  | \"rightIcon\"\n  | \"loading\"\n  | \"loadingLabel\"\n  | \"LoadingIcon\"\n> & {\n  buttonLabel: React.ReactNode\n  dropdownButtonLabel: React.ReactNode\n  children?: React.ReactNode\n  variant?: SplitButtonVariant\n}\n\nexport function SplitButton({\n  buttonLabel,\n  dropdownButtonLabel,\n  children,\n  variant,\n  size,\n  tone = `BRAND`,\n  disabled,\n  ...rest\n}: SplitButtonProps) {\n  const containerRef = React.useRef<HTMLDivElement>(null)\n\n  const iconButtonProps = useIconButton({\n    icon: <MdKeyboardArrowDown />,\n    children: dropdownButtonLabel,\n    variant,\n    size,\n    tone,\n  })\n\n  const finalIconButtonCss: ThemeCss = theme => [\n    iconButtonProps.css(theme),\n    {\n      borderTopLeftRadius: 0,\n      borderBottomLeftRadius: 0,\n      flexShrink: 0,\n    },\n  ]\n\n  const finalSeparatorCss: ThemeCss = theme => [\n    separatorCss(theme),\n    variant === `PRIMARY` && {\n      background: `\n        linear-gradient(${theme.colors.whiteFade[30]} 0%, ${theme.colors.whiteFade[30]} 100%),\n        linear-gradient(${theme.tones[tone].dark} 0%, ${theme.tones[tone].dark} 100%)`,\n    },\n    variant === `SECONDARY` && {\n      backgroundColor: `transparent`,\n      borderTop: `1px solid ${theme.tones[tone].light}`,\n      borderBottom: `1px solid ${theme.tones[tone].light}`,\n    },\n  ]\n\n  const positionMenuPopover: Position = (targetRect, popoverRect) => {\n    return {\n      ...positionRight(targetRect, popoverRect),\n      minWidth: containerRef.current\n        ? containerRef.current.clientWidth\n        : `auto`,\n    }\n  }\n\n  return (\n    <div ref={containerRef} css={baseCss}>\n      <Button\n        variant={variant}\n        size={size}\n        tone={tone}\n        disabled={disabled}\n        css={primaryButtonCss}\n        {...rest}\n      >\n        {buttonLabel}\n      </Button>\n      <span css={finalSeparatorCss} aria-hidden />\n      <DropdownMenu>\n        <DropdownMenuButton\n          {...iconButtonProps}\n          css={finalIconButtonCss}\n          disabled={disabled}\n        />\n        <DropdownMenuPopover position={positionMenuPopover}>\n          <DropdownMenuItemsLowLevel css={{ width: `auto` }}>\n            {children}\n          </DropdownMenuItemsLowLevel>\n        </DropdownMenuPopover>\n      </DropdownMenu>\n    </div>\n  )\n}\n"],"names":["baseCss","_theme","display","alignItems","primaryButtonCss","borderTopRightRadius","borderBottomRightRadius","borderRightColor","separatorCss","width","alignSelf","SplitButton","buttonLabel","dropdownButtonLabel","children","variant","size","tone","disabled","rest","containerRef","React","useRef","iconButtonProps","useIconButton","icon","finalIconButtonCss","theme","css","borderTopLeftRadius","borderBottomLeftRadius","flexShrink","finalSeparatorCss","background","colors","whiteFade","tones","dark","backgroundColor","borderTop","light","borderBottom","positionMenuPopover","targetRect","popoverRect","positionRight","minWidth","current","clientWidth"],"mappings":"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"}